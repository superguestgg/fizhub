<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="https://superguestgg.github.io/me/fizhub.css">
	<link rel="stylesheet" type="text/css" href="https://superguestgg.github.io/me/livephysics.css">
	<link rel="shortcut icon" type="image/png" href="https://lh3.google.com/u/0/d/11uFEgBLJrQad2thw05g3GgJxyKm7YZ8f=w1920-h865-iv3">
	<title>fizhub</title>
	{% load static %}

	<link rel="stylesheet" type="text/css" href="{% static 'physicsesc/fizhub.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'physicsesc/livephysics.css' %}">
	<link rel="stylesheet" type="text/css" href="file:///C:/Users/ilyah/informatics/mysite/physicsesc/static/physicsesc/livephysics.css">
	<script type="text/javascript">
		function openmenu() {
			if (document.getElementById("menubutton").className=="menubutton") {
				document.getElementById("menubutton").className="menubutton2";
				document.getElementById("menu").className="menuopened";
				
			} else {
				document.getElementById("menubutton").className="menubutton";
				document.getElementById("menu").className="menuclosed";
			}
		}
		function openaccountfromcookie(string){
			let cookies=(document.cookie).split(";");
			//alert(cookies[2]);
			let cakes=cookies.length;
			//alert(cakes);
			let username="undefined guest";
			let userpassword="1234";
			for (let i =1;i<cakes;i++){
				thiscookie=cookies[i]+"";
				console.log(thiscookie);
				namethiscookie=thiscookie.split("=")[0];
				valuethiscookie=thiscookie.split("=")[1];
				if ((namethiscookie==" user_name")){
					username=valuethiscookie;
				}
			}
			console.log(username);
			//if (username == "undefined guest"){
			//	document.getElementById("creatorname2").innerHTML="вы можете зарегистрироваться <a href='/fizhub/login'>здесь</a> "
			//} else {
			//	document.getElementById("creatorname2").remove()
			//}
			if (cakes>1) {
				document.getElementById("loginbutton").innerHTML=`<a href="/fizhub/myaccount">${username}</a>`;
			}
			if (string=="name"){
				return username
			} else if (string=="password"){
				return userpassword
			}
		}
		let massiveoftaskids=[]
		let massiveoftasks=[]
		function hiddentext(textid){
			let text=document.getElementById(textid).innerHTML
			let minitext=text.substring(0,90)
			minitext=minitext+"..."
			massiveoftaskids.push(textid)
			massiveoftasks.push(text)
			document.getElementById(textid).setAttribute("onclick", "showtext(id)")
			if (text.length>90){
				document.getElementById(textid).innerHTML="краткое условие: "+minitext
				

			} else {
				document.getElementById(textid).innerHTML=text		
					
			}

		}
		function showtext(textid){
			

			document.getElementById(textid).innerHTML=massiveoftasks[massiveoftaskids.indexOf(textid)]
			document.getElementById(textid).setAttribute("onclick", "hiddentext(id)")


			
		}
		//if ('{{alert}}'){
		//	alert('{{alert}}')
		//}





		function openlfmenu() {
			if (document.getElementById("lfmenu").className=="lfmenuopened") {
				document.getElementById("lfmenu").className="lfmenuclosed";
				document.getElementById("lfmenubutton").innerHTML="o p e n m e n u"
				
			} else {
				document.getElementById("lfmenu").className="lfmenuopened";
				document.getElementById("lfmenubutton").innerHTML="c l o s e m e n u"
			}
		}
		function createobjectmenu() {
			
			lfmenumain=document.getElementById("lfmenumain")
			lfmenumain.innerHTML=`
			<div class='lfmenusubpart' >создание объекта</div>



			<div class='lfmenusubpart' >материальную точку

			<div class="lfmenusubpartsubpart"> <input type="number" name="weight_mat" id="weight_mat" placeholder="масса"> кг</div>

			<div class="lfmenusubpartsubpart"> <input type="number" name="charge_mat" id="charge_mat" placeholder="заряд"> Кл</div>

			<div class="lfmenusubpartsubpart"> <input type="number" name="speedx_mat" id="speedx_mat" placeholder="скорость по оси х"> м/с</div>
			<div class="lfmenusubpartsubpart"> <input type="number" name="speedy_mat" id="speedy_mat" placeholder="скорость по оси у"> м/с</div>

			<div class="lfmenusubpartsubpart"> точка неподвижна <input type="checkbox" name="fixed_mat" id="fixed_mat"> </div>

			<div class="lfmenusubpartsubpart">координата x:<input type="range" name="x_mat" id="x_mat" min="0" max="${field_width}" step="1" value="0" oninput="showcoordinate('mat','x','0')"> <coordinate id='coordinate_mat_x' > 0 </coordinate> </div>

			<div class="lfmenusubpartsubpart">координата у:<input type="range" name="y_mat" id="y_mat"  min="0" max="${field_height}" step="1" value="0" oninput="showcoordinate('mat','y','0')"> <coordinate id='coordinate_mat_y' > 0 </coordinate> </div>

			<div class="lfmenusubpartsubpart" onclick="creatematpoint('mat')"><center> создать </center> </div>
			</div>






			<div class='lfmenusubpart' >прямоугольный блок

			<div class="lfmenusubpartsubpart"> <input type="number" name="weight_rectangularblock" id="weight_rectangularblock" placeholder="масса"> кг</div>

			<div class="lfmenusubpartsubpart"> <input type="number" name="charge_rectangularblock" id="charge_rectangularblock" placeholder="заряд"> Кл</div>

			<div class="lfmenusubpartsubpart"> <input type="number" name="speedx_rectangularblock" id="speedx_rectangularblock" placeholder="скорость по оси х"> м/с</div>
			<div class="lfmenusubpartsubpart"> <input type="number" name="speedy_rectangularblock" id="speedy_rectangularblock" placeholder="скорость по оси у"> м/с</div>
			<div class="lfmenusubpartsubpart"> <input type="number" name="speedw_rectangularblock" id="speedw_rectangularblock" placeholder="угловая скорость"> рад/с</div>

			<div class="lfmenusubpartsubpart"> блок неподвижен <input type="checkbox" name="fixed_rectangularblock" id="fixed_rectangularblock"> </div>

			<div class="lfmenusubpartsubpart">координата x:<input type="range" name="x_rectangularblock" id="x_rectangularblock" min="0" max="${field_width}" step="1" value="0" oninput="showcoordinate('rectangularblock','x','0')"> <coordinate id='coordinate_rectangularblock_x' > 0 </coordinate>м </div>

			<div class="lfmenusubpartsubpart">координата у:<input type="range" name="y_rectangularblock" id="y_rectangularblock"  min="0" max="${field_height}" step="1" value="0" oninput="showcoordinate('rectangularblock','y','0')"> <coordinate id='coordinate_rectangularblock_y' > 0 </coordinate>м </div>

			<div class="lfmenusubpartsubpart">ширина(х):<input type="range" name="width_rectangularblock" id="width_rectangularblock" min="0" max="${field_width}" step="1" value="0" oninput="showcoordinate('rectangularblock','width','0')"> <coordinate id='coordinate_rectangularblock_width' > 0 </coordinate>м </div>

			<div class="lfmenusubpartsubpart">высота(у):<input type="range" name="height_rectangularblock" id="height_rectangularblock"  min="0" max="${field_height}" step="1" value="0" oninput="showcoordinate('rectangularblock','height','0')"> <coordinate id='coordinate_rectangularblock_height' > 0 </coordinate>м </div>

			<div class="lfmenusubpartsubpart" onclick="createrectangularblock('rectangularblock')"><center> создать </center> </div>
			</div>



			<div class='lfmenusubpart' >круглый блок

			<div class="lfmenusubpartsubpart"> <input type="number" name="weight_roundblock" id="weight_roundblock" placeholder="масса"> кг</div>

			<div class="lfmenusubpartsubpart"> <input type="number" name="charge_roundblock" id="charge_roundblock" placeholder="заряд"> Кл</div>

			<div class="lfmenusubpartsubpart"> <input type="number" name="speedx_roundblock" id="speedx_roundblock" placeholder="скорость по оси х"> м/с</div>
			<div class="lfmenusubpartsubpart"> <input type="number" name="speedy_roundblockk" id="speedy_roundblock" placeholder="скорость по оси у"> м/с</div>
			<div class="lfmenusubpartsubpart"> <input type="number" name="speedw_roundblock" id="speedw_roundblock" placeholder="угловая скорость"> рад/с</div>

			<div class="lfmenusubpartsubpart"> блок неподвижен <input type="checkbox" name="fixed_roundblock" id="fixed_roundblock"> </div>

			<div class="lfmenusubpartsubpart">координата x:<input type="range" name="x_roundblock" id="x_roundblock" min="0" max="${field_width}" step="1" value="0" oninput="showcoordinate('roundblock','x','0')"> <coordinate id='coordinate_roundblock_x' > 0 </coordinate>м </div>

			<div class="lfmenusubpartsubpart">координата у:<input type="range" name="y_roundblock" id="y_roundblock"  min="0" max="${field_height}" step="1" value="0" oninput="showcoordinate('roundblock','y','0')"> <coordinate id='coordinate_roundblock_y' > 0 </coordinate>м </div>

			<div class="lfmenusubpartsubpart">диаметр(х):<input type="range" name="width_roundblock" id="width_roundblock" min="0" max="${field_width}" step="1" value="0" oninput="showcoordinate('roundblock','width','0')"> <coordinate id='coordinate_roundblock_width' > 0 </coordinate>м </div>



			<div class="lfmenusubpartsubpart" onclick="createroundblock('roundblock')"><center> создать </center> </div>
			</div>
			`

		}

		field_width = {{field.width}};
		field_height = {{field.height}};
		field_scale = {{field.scale}};
		field_gy = {{field.gy}};
		field_gx = {{field.gx}};
		field_ey = {{field.ey}};
		field_ex = {{field.ex}};
		field_bz = {{field.bz}};
		field_canfallout = {{field.canfallout}};

		objects=[];
		objects_count = 0;
		function showcoordinate(type,typexy,id){
			if (id == "0"){
				document.getElementById("coordinate_"+type+"_"+typexy).innerHTML=document.getElementById(typexy+"_"+type).value
				if (type == "map"){
					if (typexy=="x"){
						field_width = document.getElementById(typexy+"_"+type).value;
						document.getElementById("field").style.width=field_width*field_scale+"px";
					} else if (typexy=="y") {
						field_height = document.getElementById(typexy+"_"+type).value;
						document.getElementById("field").style.height=field_height*field_scale+"px";
					} else if (typexy=="s") {
						field_scale = document.getElementById(typexy+"_"+type).value
						document.getElementById("field").style.height=field_height*field_scale+"px";
						document.getElementById("field").style.width=field_width*field_scale+"px";
						showobjects();
					} else if (typexy=="gy") {
						field_gy = document.getElementById(typexy+"_"+type).value;
					} else if (typexy=="gx") {
						field_gx = document.getElementById(typexy+"_"+type).value	
					} else if (typexy=="ey") {
						field_ey = document.getElementById(typexy+"_"+type).value;
					} else if (typexy=="ex") {
						field_ex = document.getElementById(typexy+"_"+type).value	
					} else if (typexy=="bz") {
						field_bz = document.getElementById(typexy+"_"+type).value;
					} else if (typexy=="canfallout") {
						field_canfallout = document.getElementById(typexy+"_"+type).value;
					}
				}
			}

		}
		function showrangevalue(type,typexy,id){//showcoordinate
			if (id == "0"){
				document.getElementById("coordinate_"+type+"_"+typexy).innerHTML=document.getElementById(typexy+"_"+type).value
			}

		}

		function mapmenu(){
			lfmenumain=document.getElementById("lfmenumain")
			lfmenumain.innerHTML = `
			<div class='lfmenusubpart' >меню карты</div>

			<div class='lfmenusubpart' > масштаб <input type="range" name="s_map" id="s_map" min="0.1" max="10" step="0.1" value="${field_scale}" oninput="showcoordinate('map','s','0')"> <coordinate id='coordinate_map_s' >${field_scale}</coordinate>:1</div>

			<div class='lfmenusubpart' >ширина(x)<input type="range" name="x_map" id="x_map" min="0" max="1000" step="1" value="${field_width}" oninput="showcoordinate('map','x','0')"> <coordinate id='coordinate_map_x' > ${field_width} </coordinate>м</div>

			<div class='lfmenusubpart' >высота(y)<input type="range" name="y_map" id="y_map" min="0" max="1000" step="1" value="${field_height}" oninput="showcoordinate('map','y','0')"> <coordinate id='coordinate_map_y' > ${field_height} </coordinate>м</div>
			<div class='lfmenusubpart' >ускорение g(y)(напрвалено вниз)<input type="range" name="gy_map" id="gy_map" min="-50" max="50" step="0.01" value="${field_gy}" oninput="showcoordinate('map','gy','0')"> <coordinate id='coordinate_map_gy' > ${field_gy} </coordinate>м/с**2</div>
			<div class='lfmenusubpart' >ускорение g(x)(напрвалено вправо)<input type="range" name="gx_map" id="gx_map" min="-50" max="50" step="0.01" value="${field_gx}" oninput="showcoordinate('map','gx','0')"> <coordinate id='coordinate_map_gx' > ${field_gx} </coordinate>м/с**2</div>

			<div class='lfmenusubpart' >электрическое поле E(y)(напрвалено вниз)<input type="range" name="ey_map" id="ey_map" min="-50" max="50" step="1" value="${field_ey}" oninput="showcoordinate('map','ey','0')"> <coordinate id='coordinate_map_ey' > ${field_ey} </coordinate>Н/кл</div>
			<div class='lfmenusubpart' >электрическое поле E(x)(напрвалено вправо)<input type="range" name="ex_map" id="ex_map" min="-50" max="50" step="1" value="${field_ex}" oninput="showcoordinate('map','ex','0')"> <coordinate id='coordinate_map_ex' > ${field_ex} </coordinate>Н/кл</div>

			<div class='lfmenusubpart' >магнитное поле B(z)(напрвалено на вас)<input type="range" name="bz_map" id="bz_map" min="-50" max="50" step="1" value="${field_bz}" oninput="showcoordinate('map','bz','0')"> <coordinate id='coordinate_map_bz' > ${field_bz} </coordinate>Тл</div>



			<div class='lfmenusubpart' > за поле нельзя выпасть <input type="range" name="canfallout_map" id="canfallout_map" min="0" max="1" step="1" value="${field_canfallout}" oninput="showcoordinate('map','canfallout','0')"> <coordinate id='coordinate_map_canfallout' > ${field_canfallout} </coordinate></div>

			<div class='lfmenusubpart' >я лох?<input type="checkbox" name="canfallout_map" id="canfallout_map"></div>


			
			`
		}




		function creatematpoint(type){
			x=document.getElementById("x_"+type).value
			xs=x*field_scale+ document.getElementById("field").getBoundingClientRect().x
			y=document.getElementById("y_"+type).value
			ys=y*field_scale+document.getElementById("field").getBoundingClientRect().y
			mass = document.getElementById("weight_"+type).value
			charge = document.getElementById("charge_"+type).value
			speedx = document.getElementById("speedx_"+type).value
			speedy = document.getElementById("speedy_"+type).value
			fixed = document.getElementById("fixed_"+type).checked
			showobject(objects_count,x,y,0,0,0)			
			objects[objects_count] = ['matpoint',x,y,0,0,0,mass/1,charge/1,fixed ,speedx/1,speedy/1,0]
			objects_count+=1;
			objects.push([])
			console.log(objects)

			
		}
		function updatematpoint(type,id){
			x=document.getElementById("x_"+type).value
			xs=x*field_scale+ document.getElementById("field").getBoundingClientRect().x
			y=document.getElementById("y_"+type).value
			ys=y*field_scale+document.getElementById("field").getBoundingClientRect().y
			mass = document.getElementById("weight_"+type).value
			charge = document.getElementById("charge_"+type).value
			speedx = document.getElementById("speedx_"+type).value
			speedy = document.getElementById("speedy_"+type).value
			fixed = document.getElementById("fixed_"+type).checked
			showobject(id,x,y,0,0,0);
			objects[id] = ['matpoint',x,y,0,0,0,mass/1,charge/1,fixed ,speedx/1,speedy/1,0]
			showobjects();
			console.log(objects)

		}








		function createrectangularblock(type){
			x=document.getElementById("x_"+type).value
			xs=x*field_scale+ document.getElementById("field").getBoundingClientRect().x
			y=document.getElementById("y_"+type).value
			ys=y*field_scale+document.getElementById("field").getBoundingClientRect().y
			width=document.getElementById("width_"+type).value
			widths=width*field_scale
			height=document.getElementById("height_"+type).value
			heights=height*field_scale
			mass = document.getElementById("weight_"+type).value
			charge = document.getElementById("charge_"+type).value
			speedx = document.getElementById("speedx_"+type).value
			speedy = document.getElementById("speedy_"+type).value
			speedw = document.getElementById("speedw_"+type).value
			fixed = document.getElementById("fixed_"+type).checked
			showobject(objects_count,x,y,width,height,0)			
			objects[objects_count] = ['rectangularblock',x,y,width,height,0,mass/1,charge/1,fixed ,speedx/1,speedy/1,speedw/1]
			objects_count+=1;
			objects.push([])
			console.log(objects)
		}
		function updaterectangularblock(type,id){
			x=document.getElementById("x_"+type).value
			xs=x*field_scale+ document.getElementById("field").getBoundingClientRect().x
			y=document.getElementById("y_"+type).value
			ys=y*field_scale+document.getElementById("field").getBoundingClientRect().y
			width=document.getElementById("width_"+type).value
			widths=width*field_scale
			height=document.getElementById("height_"+type).value
			heights=height*field_scale
			mass = document.getElementById("weight_"+type).value
			charge = document.getElementById("charge_"+type).value
			speedx = document.getElementById("speedx_"+type).value
			speedy = document.getElementById("speedy_"+type).value
			speedw = document.getElementById("speedw_"+type).value
			fixed = document.getElementById("fixed_"+type).checked
			showobject(id,x,y,width,height,0)			
			objects[id] = ['rectangularblock',x,y,width,height,0,mass/1,charge/1,fixed ,speedx/1,speedy/1,speedw/1]
			console.log(objects)
			showobjects();
			
		}






		function createroundblock(type){
			x=document.getElementById("x_"+type).value
			xs=x*field_scale+ document.getElementById("field").getBoundingClientRect().x
			y=document.getElementById("y_"+type).value
			ys=y*field_scale+document.getElementById("field").getBoundingClientRect().y
			width=document.getElementById("width_"+type).value
			widths=width*field_scale
			height=width
			heights=widths
			mass = document.getElementById("weight_"+type).value
			charge = document.getElementById("charge_"+type).value
			speedx = document.getElementById("speedx_"+type).value
			speedy = document.getElementById("speedy_"+type).value
			speedw = document.getElementById("speedw_"+type).value
			fixed = document.getElementById("fixed_"+type).checked
			showobject(objects_count,x,y,width,height,width)			
			objects[objects_count] = ['roundblock',x,y,width,height,width,mass/1,charge/1,fixed ,speedx/1,speedy/1,speedw/1]
			objects_count+=1;
			objects.push([])
			console.log(objects)
		}
		function updateroundblock(type,id){
			x=document.getElementById("x_"+type).value
			xs=x*field_scale+ document.getElementById("field").getBoundingClientRect().x
			y=document.getElementById("y_"+type).value
			ys=y*field_scale+document.getElementById("field").getBoundingClientRect().y
			width=document.getElementById("width_"+type).value
			widths=width*field_scale
			height=width
			heights=widths
			mass = document.getElementById("weight_"+type).value
			charge = document.getElementById("charge_"+type).value
			speedx = document.getElementById("speedx_"+type).value
			speedy = document.getElementById("speedy_"+type).value
			speedw = document.getElementById("speedw_"+type).value
			fixed = document.getElementById("fixed_"+type).checked
			showobject(id,x,y,width,height,width)			
			objects[id] = ['roundblock',x,y,width,height,width,mass/1,charge/1,fixed ,speedx/1,speedy/1,speedw/1]
			console.log(objects)
			showobjects();
		}






		function showobject(id,x,y,width,height,borderradius){
			xs=x*field_scale + document.getElementById("field").getBoundingClientRect().x
			ys=y*field_scale + document.getElementById("field").getBoundingClientRect().y
			widths=width*field_scale
			heights=height*field_scale
			borderradius = borderradius*field_scale
			widths = (widths)*(widths>=2)+2*(widths<2)
			heights = (heights)*(heights>=2)+2*(heights<2)
			document.getElementById("objects").innerHTML+=`
			<div style="position: fixed; left: ${xs}px; top: ${ys}px; height: ${heights}px; width: ${widths}px; border-radius: ${borderradius}px; background-color: #fff; z-index:1000;" id="${id}" onclick="oneobjectmenu(${id})"></div>


			`
		}

		function showobject_update(id,x,y,width,height,borderradius){
			xs=x*field_scale + document.getElementById("field").getBoundingClientRect().x
			ys=y*field_scale + document.getElementById("field").getBoundingClientRect().y
			widths=width*field_scale
			heights=height*field_scale
			borderradius = borderradius*field_scale
			widths = (widths)*(widths>=2)+2*(widths<2)
			heights = (heights)*(heights>=2)+2*(heights<2)
			object=document.getElementById(id);
			object.style=`position: fixed; left: ${xs}px; top: ${ys}px; height: ${heights}px; width: ${widths}px; border-radius: ${borderradius}px; background-color: #fff; z-index:1000; transition:0.1s linear;`

			
		
		}

		function showobjects(){
			document.getElementById("objects").innerHTML=""
			for (let i=0;i<objects_count; i++){
				showobject(i,objects[i][1],objects[i][2],objects[i][3],objects[i][4],objects[i][5])
			}
		}

		function showobjects_update(){
			
			for (let i=0;i<objects_count; i++){
				showobject_update(i,objects[i][1],objects[i][2],objects[i][3],objects[i][4],objects[i][5])
			}
		}

		function create_field(){
			document.getElementById("field").style.width=field_width*field_scale+"px";
					
			document.getElementById("field").style.height=field_height*field_scale+"px";

		}

		function allobjectsmenu(){
			let d=document.getElementById("lfmenumain")
			let str=`<form action="{% url 'physicsesc:livephysicsshow' %}" method="post" enctype="multipart/form-data">
 			<input type="hidden" name="objects_count" value="${objects_count}">
 			{% csrf_token %}
 			<input type="hidden" name="field_width" value="${field_width}">
 			<input type="hidden" name="field_height" value="${field_height}">
 			<input type="hidden" name="field_scale" value="${field_scale}">
 			<input type="hidden" name="field_gy" value="${field_gy}">
 			<input type="hidden" name="field_gx" value="${field_gx}">
 			<input type="hidden" name="field_ey" value="${field_ey}">
 			<input type="hidden" name="field_ex" value="${field_ex}">
 			<input type="hidden" name="field_bz" value="${field_bz}">
 			<input type="hidden" name="field_canfallout" value="${field_canfallout}">

			`
			for (let i=0;i<objects_count; i++){
				 str=str+`<div class="lfmenusubpart" id="${i}" onclick="oneobjectmenu(${i})" >
				 <div class="lfmenusubpartsubpart">${objects[i][0]}(${i})</div>


				`

				for (let j=0;j<objects[i].length;j++){
					str=str+`<input type="hidden" name="${i}_${j}" value="${objects[i][j]}">`
				}
				str=str+`</div>`
			}
			str=str+`<br>
			<div class="lfmenusubpart">симуляция
			<div class="lfmenusubpartsubpart">длительность <input type="number" name="simulation_time" placeholder="длительность симуляции" value="{{simulation_time}}">с</div>
			<div class="lfmenusubpartsubpart">точность <input type="number" name="deltatime" placeholder="точность симуляции" value="{{deltatime}}">с</div>
			<input type="submit" value="провести симуляцию" class="lfmenusubpart">
			</div>
			</form>`
			d.innerHTML=str
		}




		function oneobjectmenu(id){
			showobjects();
			document.getElementById(id).style.boxShadow="0 0 30px #f88";
			lfmenumain=document.getElementById("lfmenumain")
			if (objects[id][0]=="matpoint"){
			lfmenumain.innerHTML=`
			<div class='lfmenusubpart' >изменение объекта</div>



			<div class='lfmenusubpart' >материальную точку(${id})

			<div class="lfmenusubpartsubpart"> <input type="number" name="weight_mat" id="weight_mat" placeholder="масса" value="${objects[id][6]}"> кг</div>

			<div class="lfmenusubpartsubpart"> <input type="number" name="charge_mat" id="charge_mat" placeholder="заряд" value="${objects[id][7]}"> Кл</div>

			<div class="lfmenusubpartsubpart"> <input type="number" name="speedx_mat" id="speedx_mat" placeholder="скорость по оси х" value="${objects[id][9]}"> м/с</div>
			<div class="lfmenusubpartsubpart"> <input type="number" name="speedy_mat" id="speedy_mat" placeholder="скорость по оси у" value="${objects[id][10]}"> м/с</div>

			<div class="lfmenusubpartsubpart"> точка неподвижна <input type="checkbox" name="fixed_mat" id="fixed_mat" checked="${objects[id][8]}"></div>

			<div class="lfmenusubpartsubpart">координата x:<input type="range" name="x_mat" id="x_mat" min="0" max="${field_width}" step="1" value="${objects[id][1]}" oninput="showcoordinate('mat','x','0')"> <coordinate id='coordinate_mat_x' > ${objects[id][1]} </coordinate> </div>

			<div class="lfmenusubpartsubpart">координата у:<input type="range" name="y_mat" id="y_mat"  min="0" max="${field_height}" step="1" value="${objects[id][2]}" oninput="showcoordinate('mat','y','0')"> <coordinate id='coordinate_mat_y' > ${objects[id][2]} </coordinate> </div>

			<div class="lfmenusubpartsubpart" onclick="updatematpoint('mat',${id})"><center> обновить </center> </div>
			</div>

`
		} else if (objects[id][0]=="rectangularblock") {



			lfmenumain.innerHTML=`<div class='lfmenusubpart' >прямоугольный блок(${id})

			<div class="lfmenusubpartsubpart"> <input type="number" name="weight_rectangularblock" id="weight_rectangularblock" placeholder="масса" value="${objects[id][6]}"> кг</div>

			<div class="lfmenusubpartsubpart"> <input type="number" name="charge_rectangularblock" id="charge_rectangularblock" placeholder="заряд" value="${objects[id][7]}"> Кл</div>

			<div class="lfmenusubpartsubpart"> <input type="number" name="speedx_rectangularblock" id="speedx_rectangularblock" placeholder="скорость по оси х" value="${objects[id][9]}"> м/с</div>
			<div class="lfmenusubpartsubpart"> <input type="number" name="speedy_rectangularblock" id="speedy_rectangularblock" placeholder="скорость по оси у" value="${objects[id][10]}"> м/с</div>
			<div class="lfmenusubpartsubpart"> <input type="number" name="speedw_rectangularblock" id="speedw_rectangularblock" placeholder="угловая скорость" value="${objects[id][11]}"> рад/с</div>

			<div class="lfmenusubpartsubpart" checked="${objects[id][8]}"> блок неподвижен <input type="checkbox" name="fixed_rectangularblock" id="fixed_rectangularblock"> </div>

			<div class="lfmenusubpartsubpart">координата x:<input type="range" name="x_rectangularblock" id="x_rectangularblock" min="0" max="${field_width}" step="1" value="${objects[id][1]}" oninput="showcoordinate('rectangularblock','x','0')"> <coordinate id='coordinate_rectangularblock_x' > ${objects[id][1]} </coordinate>м </div>

			<div class="lfmenusubpartsubpart">координата у:<input type="range" name="y_rectangularblock" id="y_rectangularblock"  min="0" max="${field_height}" step="1" value="${objects[id][2]}" oninput="showcoordinate('rectangularblock','y','0')"> <coordinate id='coordinate_rectangularblock_y' > ${objects[id][2]} </coordinate>м </div>

			<div class="lfmenusubpartsubpart">ширина(х):<input type="range" name="width_rectangularblock" id="width_rectangularblock" min="0" max="${field_width}" step="1" value="${objects[id][3]}" oninput="showcoordinate('rectangularblock','width','0')"> <coordinate id='coordinate_rectangularblock_width' > ${objects[id][3]} </coordinate>м </div>

			<div class="lfmenusubpartsubpart">высота(у):<input type="range" name="height_rectangularblock" id="height_rectangularblock"  min="0" max="${field_height}" step="1" value="${objects[id][4]}" oninput="showcoordinate('rectangularblock','height','0')"> <coordinate id='coordinate_rectangularblock_height' > ${objects[id][4]} </coordinate>м </div>

			<div class="lfmenusubpartsubpart" onclick="updaterectangularblock('rectangularblock',${id})"><center> обновить </center> </div>
			</div>`



		} else if (objects[id][0]=="roundblock") {

			lfmenumain.innerHTML=`<div class='lfmenusubpart' >круглый блок(${id})

			<div class="lfmenusubpartsubpart"> <input type="number" name="weight_roundblock" id="weight_roundblock" placeholder="масса" value="${objects[id][6]}"> кг</div>

			<div class="lfmenusubpartsubpart"> <input type="number" name="charge_roundblock" id="charge_roundblock" placeholder="заряд" value="${objects[id][7]}"> Кл</div>

			<div class="lfmenusubpartsubpart"> <input type="number" name="speedx_roundblock" id="speedx_roundblock" placeholder="скорость по оси х" value="${objects[id][9]}"> м/с</div>
			<div class="lfmenusubpartsubpart"> <input type="number" name="speedy_roundblockk" id="speedy_roundblock" placeholder="скорость по оси у" value="${objects[id][10]}"> м/с</div>
			<div class="lfmenusubpartsubpart"> <input type="number" name="speedw_roundblock" id="speedw_roundblock" placeholder="угловая скорость" value="${objects[id][11]}"> рад/с</div>

			<div class="lfmenusubpartsubpart"> блок неподвижен <input type="checkbox" name="fixed_roundblock" id="fixed_roundblock" checked="${objects[id][8]}"> </div>

			<div class="lfmenusubpartsubpart">координата x:<input type="range" name="x_roundblock" id="x_roundblock" min="0" max="${field_width}" step="1" value="${objects[id][1]}" oninput="showcoordinate('roundblock','x','0')"> <coordinate id='coordinate_roundblock_x' > ${objects[id][1]} </coordinate>м </div>

			<div class="lfmenusubpartsubpart">координата у:<input type="range" name="y_roundblock" id="y_roundblock"  min="0" max="${field_height}" step="1" value="${objects[id][2]}" oninput="showcoordinate('roundblock','y','0')"> <coordinate id='coordinate_roundblock_y' > ${objects[id][2]} </coordinate>м </div>

			<div class="lfmenusubpartsubpart">диаметр(х):<input type="range" name="width_roundblock" id="width_roundblock" min="0" max="${field_width}" step="1" value="${objects[id][3]}" oninput="showcoordinate('roundblock','width','0')"> <coordinate id='coordinate_roundblock_width' > ${objects[id][3]} </coordinate>м </div>



			<div class="lfmenusubpartsubpart" onclick="updateroundblock('roundblock',${id})"><center> обновить </center> </div>
			</div>
			`
		}
		}

	</script>
</head>
<body>
	<div class="header"> 
		<div class="menubuttonplace"><div class="menubutton" id="menubutton" onclick="openmenu()">&#9776;</div></div>
		<div class="taskname"><center>livephysics</center></div>
		<div class="changetheme" id="changetheme" onclick="changetheme()"></div>
		<div class="loginbutton" id="loginbutton" ><a href="/fizhub/login">login|войти</a></div>
	</div>
	<div class="menuclosed" id="menu">
		<div class="menusubpart"><a href="/fizhub/main/"><symbol>&#8962;</symbol>главная</a></div>
		<div class="menusubpart"><a href="/fizhub/task/"><symbol><svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"><path d="M5 6.75c0-.41.34-.75.75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 5 6.75zm0 3.5c0-.41.34-.75.75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1-.75-.75z"></path><path d="M7.13 2c-1.61 0-2.34.14-3.08.53-.65.35-1.17.87-1.52 1.52-.4.74-.53 1.47-.53 3.08v5.74c0 1.61.14 2.34.53 3.08.35.65.87 1.17 1.52 1.52.74.4 1.47.53 3.08.53h5.74c1.61 0 2.34-.14 3.08-.53a3.64 3.64 0 0 0 1.52-1.52c.4-.74.53-1.47.53-3.08V7.13c0-1.61-.14-2.34-.53-3.08a3.64 3.64 0 0 0-1.52-1.52c-.74-.4-1.47-.53-3.08-.53zM4.75 3.86c.42-.22.85-.36 2.38-.36h5.74c1.53 0 1.96.14 2.38.36.38.2.69.5.9.9.21.4.35.84.35 2.37v5.74c0 1.53-.14 1.96-.36 2.38-.2.38-.5.69-.9.9-.34.18-.7.3-1.74.34v-2.74a.75.75 0 0 0-1.5 0v2.75H8v-2.75a.75.75 0 0 0-1.5 0v2.74c-1.03-.03-1.4-.16-1.75-.35-.38-.2-.69-.5-.9-.9-.21-.4-.35-.84-.35-2.37V7.13c0-1.53.14-1.96.36-2.38.2-.38.5-.69.9-.9zm1 2.14a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5zm0 3.5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5z"></path></g></svg></symbol>задачи</a></div>

		<div class="menusubpart"><a href="/fizhub/user"><symbol><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.75 3.5a7.25 7.25 0 1 0 4.45 12.97l4.26 4.27a.9.9 0 1 0 1.28-1.28l-4.27-4.26a7.25 7.25 0 0 0-5.72-11.7Zm0 1.8a5.45 5.45 0 1 0 0 10.9 5.45 5.45 0 0 0 0-10.9Z" fill="currentColor"></path></svg></symbol>создатели</a></div>


		<div class="menusubpart"><a href="/fizhub/group/"><symbol><svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M10 7.75a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5zM7.25 6.5a2.75 2.75 0 1 1 5.5 0 2.75 2.75 0 0 1-5.5 0zm-.5 7.25c0-.42.23-.83.8-1.17A4.81 4.81 0 0 1 10 12c1.03 0 1.88.23 2.45.58.57.34.8.75.8 1.17 0 .3-.1.44-.22.54-.14.11-.4.21-.78.21h-4.5c-.39 0-.64-.1-.78-.21-.12-.1-.22-.25-.22-.54zM10 10.5c-1.22 0-2.37.27-3.23.8-.88.53-1.52 1.37-1.52 2.45 0 .7.28 1.3.78 1.71.48.39 1.1.54 1.72.54h4.5c.61 0 1.24-.15 1.72-.54.5-.4.78-1 .78-1.71 0-1.08-.64-1.92-1.52-2.45-.86-.53-2-.8-3.23-.8zm4-5.59c.06-.4.44-.7.85-.64a2.5 2.5 0 0 1-.35 4.98.75.75 0 0 1 0-1.5 1 1 0 0 0 .14-1.99.75.75 0 0 1-.63-.85zM15.76 10a.75.75 0 0 0 0 1.5c1.16 0 1.75.67 1.75 1.25 0 .22-.07.41-.19.55-.1.12-.24.2-.46.2a.75.75 0 0 0 0 1.5c1.43 0 2.15-1.21 2.15-2.25 0-1.71-1.6-2.75-3.25-2.75zM5 10.75a.75.75 0 0 0-.75-.75C2.61 10 1 11.04 1 12.75 1 13.79 1.72 15 3.15 15a.75.75 0 0 0 0-1.5.57.57 0 0 1-.47-.2.86.86 0 0 1-.18-.55c0-.58.6-1.25 1.75-1.25.41 0 .75-.34.75-.75zm.14-6.47a.75.75 0 0 1 .22 1.48 1 1 0 0 0 .14 1.99.75.75 0 1 1 0 1.5 2.5 2.5 0 0 1-.36-4.97z" fill="currentColor" fill-rule="evenodd"></path></svg></symbol>группы</a></div>


		<div class="menusubpart"><a href="/fizhub/olympiad/"><symbol>...</symbol>олимпиады</a></div>
		<div class="menusubpart"><a href="/fizhub/subscribes/"><symbol><svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M6.25 3.5a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm-1.5 3a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm-2.06 5.07c.96-.55 2.22-.82 3.56-.82s2.6.27 3.56.82c.98.56 1.69 1.47 1.69 2.68 0 .7-.28 1.3-.78 1.71-.48.39-1.1.54-1.72.54H3.5c-.61 0-1.24-.15-1.72-.54-.5-.4-.78-1-.78-1.71 0-1.21.71-2.12 1.69-2.68zm.75 1.3c-.65.37-.94.84-.94 1.38 0 .3.1.44.22.54.14.11.4.21.78.21H9c.39 0 .64-.1.78-.21.12-.1.22-.25.22-.54 0-.54-.29-1-.94-1.38-.66-.39-1.65-.62-2.81-.62s-2.15.23-2.81.62zM13.75 3.5a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm-1.5 3a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0z"></path></g><path d="M13.75 12.25c-.23 0-.45.01-.68.03a.75.75 0 1 1-.14-1.49c.27-.03.54-.04.82-.04 1.34 0 2.6.27 3.56.82.98.56 1.69 1.47 1.69 2.68 0 .7-.28 1.3-.78 1.71-.48.39-1.1.54-1.72.54h-3a.75.75 0 0 1 0-1.5h3c.39 0 .64-.1.78-.21.12-.1.22-.25.22-.54 0-.54-.29-1-.94-1.38a5.77 5.77 0 0 0-2.81-.62z"></path></g></svg></symbol>подписки</a></div>


		<div class="menusubpart"><a href="/fizhub/theme"><symbol>&#8376;</symbol>темы</a></div>
		


		<div class="menusubpart"><a href="/fizhub/createtask/"><symbol>&#10010;</symbol>новая задача</a></div>
	
		<div class="menusubpart"><a href="/fizhub/useful"><symbol><svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M17.2 6.78a2 2 0 0 1 .24.58c.06.23.06.48.06.97v2.97c0 2.52 0 3.78-.49 4.74a4.5 4.5 0 0 1-1.97 1.97c-.96.49-2.22.49-4.74.49h-.6c-2.52 0-3.78 0-4.74-.49a4.5 4.5 0 0 1-1.97-1.97c-.49-.96-.49-2.22-.49-4.74V8.7c0-2.52 0-3.78.49-4.74a4.5 4.5 0 0 1 1.97-1.97c.96-.49 2.22-.49 4.74-.49h.97c.5 0 .74 0 .97.06.2.04.4.13.58.23.2.13.37.3.72.65l3.62 3.62c.35.35.52.52.65.72zM10.3 17h-.6c-1.28 0-2.16 0-2.83-.06-.66-.05-1-.15-1.23-.27a3 3 0 0 1-1.31-1.3 3.24 3.24 0 0 1-.27-1.24C4 13.46 4 12.58 4 11.3V8.7c0-1.28 0-2.16.06-2.83.05-.66.15-1 .27-1.23a3 3 0 0 1 1.3-1.31c.24-.12.58-.22 1.24-.27C7.54 3 8.42 3 9.7 3h.3v1.28c0 .67 0 1.23.04 1.67.03.47.12.88.31 1.28.32.6.81 1.1 1.42 1.42.4.2.81.28 1.28.31.44.04 1 .04 1.67.04H16v2.3c0 1.28 0 2.16-.06 2.83-.05.66-.15 1-.27 1.23a3 3 0 0 1-1.3 1.31c-.24.12-.58.22-1.24.27-.67.06-1.55.06-2.83.06zm5.57-9.5h-1.12c-.71 0-1.2 0-1.58-.03a1.88 1.88 0 0 1-.71-.16c-.33-.17-.6-.44-.77-.77a1.88 1.88 0 0 1-.16-.7 21.6 21.6 0 0 1-.03-1.59V3.13l.01.01.37.36 3.62 3.62.36.37.01.01z" fill="currentColor" fill-rule="evenodd"></path></svg></symbol>полезные файлы</a></div>


		<div class="menusubpart"><a href="/fizhub/login"><symbol><svg fill="none" height="28" width="28" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M17.643 25H15a1 1 0 110-2h2.6c1.137 0 1.929 0 2.546-.051.605-.05.953-.142 1.216-.276a3 3 0 001.311-1.311c.134-.263.226-.611.276-1.216.05-.617.051-1.41.051-2.546v-7.2c0-1.137 0-1.929-.051-2.546-.05-.605-.142-.953-.276-1.216a3 3 0 00-1.311-1.311c-.263-.134-.611-.226-1.216-.276C19.529 5.001 18.736 5 17.6 5H15a1 1 0 110-2h2.643c1.084 0 1.958 0 2.666.058.729.06 1.369.185 1.961.487a5 5 0 012.185 2.185c.302.592.428 1.233.487 1.961C25 8.4 25 9.273 25 10.357v7.286c0 1.084 0 1.958-.058 2.666-.06.728-.185 1.369-.487 1.961a5 5 0 01-2.185 2.185c-.592.302-1.232.428-1.961.487C19.6 25 18.727 25 17.643 25zM3 14a1 1 0 011-1h9.586l-2.293-2.293a1 1 0 011.414-1.414l4 4a.996.996 0 01.294.705v.005c-.002.272-.11.518-.287.698l-.008.007-3.999 4a1 1 0 01-1.414-1.415L13.586 15H4a1 1 0 01-1-1z" fill="currentColor" fill-rule="evenodd"></path></svg></symbol>войти</a></div>


		<div class="menusubpart"><a href="/fizhub/articles/"><symbol><svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M11.84 2H8.16c-.93 0-1.67 0-2.26.05-.62.05-1.15.15-1.63.4a4.15 4.15 0 0 0-1.82 1.82 4.26 4.26 0 0 0-.4 1.63C2 6.5 2 7.23 2 8.16v3.68c0 .93 0 1.67.05 2.26.05.62.15 1.15.4 1.63.4.78 1.04 1.42 1.82 1.82.48.25 1.01.35 1.63.4.6.05 1.33.05 2.26.05h3.68c.93 0 1.67 0 2.26-.05a4.26 4.26 0 0 0 1.63-.4 4.15 4.15 0 0 0 1.82-1.82c.25-.48.35-1.01.4-1.63.05-.6.05-1.33.05-2.26V8.16c0-.93 0-1.67-.05-2.26a4.26 4.26 0 0 0-.4-1.63 4.15 4.15 0 0 0-1.82-1.82 4.26 4.26 0 0 0-1.63-.4C13.5 2 12.77 2 11.84 2zm-6.9 1.79c.25-.12.56-.2 1.08-.25.53-.04 1.2-.04 2.17-.04h3.62c.96 0 1.64 0 2.17.04.52.05.83.13 1.07.25.5.25.9.66 1.16 1.16.12.24.2.55.25 1.07l.02.48H3.52l.02-.48c.05-.52.13-.83.25-1.07.25-.5.66-.9 1.16-1.16zM3.5 8v3.81c0 .96 0 1.64.04 2.17.05.52.13.83.25 1.07.25.5.66.9 1.16 1.16.24.12.55.2 1.07.25.53.04 1.2.04 2.17.04h3.62c.96 0 1.64 0 2.17-.04a2.8 2.8 0 0 0 1.07-.25c.5-.25.9-.66 1.16-1.16.12-.24.2-.55.25-1.07.04-.53.04-1.2.04-2.17V8z" fill="currentColor" fill-rule="evenodd"></path></svg></symbol>статьи</a></div>


		<div class="menusubpart"><a href="/fizhub/livephysics/"><symbol>&#9872;</symbol>живая физика</a></div>
		<div class="menusubpart"><a href="/anonnetwork/"><symbol>&#10144;</symbol>AnonNetwork</a></div>
		<p>&#946; version</p>
	</div>
	
	
    <div class="bod">
    	
    	<div class="pagemenu">
    		<a onclick="allobjectsmenu()" class="a"><symbol>&#8962;</symbol>все объекты</a>&nbsp;&nbsp;&nbsp;

    		<a onclick="createobjectmenu()" id="pagemenucreateobjectmenu" class="a"><symbol>&#10010;</symbol>создать объект</a>&nbsp;&nbsp;&nbsp;

 			<a onclick="mapmenu()"><symbol> &#10002; </symbol>меню поля</a>&nbsp;&nbsp;&nbsp;
    		

    	</div>

    	<div id="objects">{{simulation}}</div>
    	<div class="field" style="width: 100px; height:100px" id="field"></div>



    	<div class="lfmenuopened" id="lfmenu">
    		<div class="lfmenubutton" id="lfmenubutton" onclick="openlfmenu()">c l o s e m e n u</div>
    		<div id="lfmenumain"></div>
    	</div>


    	
    		

    	</div>


    	</div>
<script type="text/javascript">
	openaccountfromcookie("i");
	
	//let simulation = {{simulation}}
	//console.log(simulation)
	createobjectmenu();
	let object_time_list=document.getElementById("objects").innerHTML


	deltatime=(({{deltatime}})/1)*1000;
	simulation_time={{simulation_time}}


	function simulation (object_time_list){
		objects_time_list_end=object_time_list.replace("'","",1000)
		objects_time_list_end=objects_time_list_end.split(",")
		object_time_list=object_time_list.replace("'","",10000).replace("[","",10).replace("]","",10)
		object_time_list=object_time_list.split(",")
		console.log(object_time_list.length)
		comma_count=object_time_list.length
		
		for (let t=0;t<object_time_list.length;t++){
			objects_this_turn=object_time_list[t].split("|")
			objects_count=objects_this_turn.length

			console.log(objects_count)
			for (let j=0;j<objects_this_turn.length;j++){
				objects_this_turn[j]=objects_this_turn[j].split("_")
			}
			objects_time_list_end[t]=objects_this_turn;
			//showobjects();
			
		}
		console.log(objects_time_list_end);
		document.getElementById("objects").innerHTML=objects_time_list_end
		objects = objects_time_list_end[0];
		showobjects();

	}

	function playsimulation(objects_time_list_end){
		simulationturn=0
		setInterval("playsimulationturn(objects_time_list_end)", deltatime);


	}
	function playsimulationturn(objects_time_list_end){
		objects = objects_time_list_end[simulationturn];
		showobjects_update();
		simulationturn++;
		if (simulationturn >= objects_time_list_end.length){simulationturn=0}


	}
	create_field();
	simulation(object_time_list);
	playsimulation(objects_time_list_end);
</script>
</body>
</html>